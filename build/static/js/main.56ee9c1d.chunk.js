(this.webpackJsonpseeismartweb=this.webpackJsonpseeismartweb||[]).push([[0],{298:function(e,t,a){e.exports=a(570)},570:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(13),i=a(103),c=a(265),s=a(11),l=(a(307),a(10)),u=(a(309),a(123)),d=a(295),m=a(34),p=a(33),f=a(293),h=a(153),E=a(154),g=a(180),k=a(181),b=function(e){Object(k.a)(a,e);var t=Object(g.a)(a);function a(){var e;Object(h.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={error:null,errorInfo:null},e}return Object(E.a)(a,[{key:"componentDidCatch",value:function(e,t){this.setState({error:e,errorInfo:t})}},{key:"render",value:function(){return this.state.errorInfo?r.a.createElement("div",null,r.a.createElement("h2",null,"Something went wrong"),r.a.createElement("details",{style:{whiteSpace:"pre-wrap"}},this.state.error&&this.state.error.toString(),r.a.createElement("br",null),this.state.errorInfo.componentStack)):this.props.children}}]),a}(r.a.Component),x=(a(230),a(29)),v=a(5),y=a.n(v),w=a(8),O=a(573),C=a(574),T=a(575),S=a(576),I=a(577),_=a(578),j=a(579),A=a(580),D=(a(36),a(4)),F=a(7),z=a.n(F),B=function(e){return function(t,a){z.a.get("/api/homeDir",{},{headers:{authorization:"Bearer ".concat(e)}}).then((function(e){2e4===e.data.code?t({type:"ADD_HOMEDIR",homeDir:e.data.homeDir}):(D.a.error({message:"\u8d26\u53f7\u4e0d\u5b58\u5728",description:"",duration:2}),localStorage.removeItem("token"),setTimeout((function(){window.location.reload()}),2e3))})).catch((function(){D.a.error({message:"Error",description:"Server Error",duration:2})}))}},L=function(e){return function(t,a){z.a.get("/api/user",{},{headers:{authorization:"Bearer ".concat(e)}}).then((function(e){2e4===e.data.code?t({type:"ADD_USER",user:e.data.cb}):(D.a.error({message:"\u8d26\u53f7\u4e0d\u5b58\u5728",description:"",duration:2}),localStorage.removeItem("token"),setTimeout((function(){window.location.reload()}),2e3))})).catch((function(){D.a.error({message:"Error",description:"Server Error",duration:2})}))}},R=function(e){return function(t,a){z.a.get("/api/codes",{},{headers:{authorization:"Bearer ".concat(e)}}).then((function(e){2e4===e.data.code?t({type:"ADD_CODES",codes:e.data.cb}):(D.a.error({message:"\u8d26\u53f7\u4e0d\u5b58\u5728",description:"",duration:2}),localStorage.removeItem("token"),setTimeout((function(){window.location.reload()}),2e3))})).catch((function(){D.a.error({message:"Error",description:"Server Error",duration:2})}))}},U=function(e){return function(t,a){z.a.get("/api/users",{},{headers:{authorization:"Bearer ".concat(e)}}).then((function(e){2e4===e.data.code?t({type:"ADD_USERS",users:e.data.cb}):(D.a.error({message:"\u8d26\u53f7\u4e0d\u5b58\u5728",description:"",duration:2}),localStorage.removeItem("token"),setTimeout((function(){window.location.reload()}),2e3))})).catch((function(){D.a.error({message:"Error",description:"Server Error",duration:2})}))}},P=function(e){return function(t,a){z.a.get("/api/accounts",{},{headers:{authorization:"Bearer ".concat(e)}}).then((function(e){2e4===e.data.code?t({type:"ADD_ACCOUNTS",accounts:e.data.cb}):(D.a.error({message:"\u8d26\u53f7\u4e0d\u5b58\u5728",description:"",duration:2}),localStorage.removeItem("token"),setTimeout((function(){window.location.reload()}),2e3))})).catch((function(){D.a.error({message:"Error",description:"Server Error",duration:2})}))}},M=function(e){return function(t,a){z.a.get("/api/allCodes",{},{headers:{authorization:"Bearer ".concat(e)}}).then((function(e){2e4===e.data.code?t({type:"ADD_ALLCODES",allCodes:e.data.cb}):(D.a.error({message:"\u8d26\u53f7\u4e0d\u5b58\u5728",description:"",duration:2}),localStorage.removeItem("token"),setTimeout((function(){window.location.reload()}),2e3))})).catch((function(){D.a.error({message:"Error",description:"Server Error",duration:2})}))}},q=function(e){return function(t,a){z.a.get("/api/unUseCodes",{},{headers:{authorization:"Bearer ".concat(e)}}).then((function(e){2e4===e.data.code?t({type:"UNUSECODES",unUseCodes:e.data.cb}):(D.a.error({message:"\u8d26\u53f7\u4e0d\u5b58\u5728",description:"",duration:2}),localStorage.removeItem("token"),setTimeout((function(){window.location.reload()}),2e3))})).catch((function(){D.a.error({message:"Error",description:"Server Error",duration:2})}))}},N=function(e){return function(t,a){z.a.get("/api/streams",{},{headers:{authorization:"Bearer ".concat(e)}}).then((function(e){2e4===e.data.code?t({type:"ADD_STREAMS",streams:e.data.cb}):(D.a.error({message:"\u8d26\u53f7\u4e0d\u5b58\u5728",description:"",duration:2}),localStorage.removeItem("token"),setTimeout((function(){window.location.reload()}),2e3))})).catch((function(){D.a.error({message:"Error",description:"Server Error",duration:2})}))}},W=function(e){return function(t,a){z.a.get("/api/fileList",{},{headers:{authorization:"Bearer ".concat(e)}}).then((function(e){2e4===e.data.code?t({type:"ADD_FILELIST",fileList:e.data.cb}):(D.a.error({message:"\u8d26\u53f7\u4e0d\u5b58\u5728",description:"",duration:2}),localStorage.removeItem("token"),setTimeout((function(){window.location.reload()}),2e3))})).catch((function(){D.a.error({message:"Error",description:"Server Error",duration:2})}))}},G=function(e){return function(t,a){z.a.get("/api/uploadFiles",{},{headers:{authorization:"Bearer ".concat(e)}}).then((function(e){2e4===e.data.code?t({type:"ADD_UPLOADFILES",uploadFiles:e.data.cb}):(D.a.error({message:"\u8d26\u53f7\u4e0d\u5b58\u5728",description:"",duration:2}),localStorage.removeItem("token"),setTimeout((function(){window.location.reload()}),2e3))})).catch((function(){D.a.error({message:"Error",description:"Server Error",duration:2})}))}};function K(e){return{type:"SETTINGDIALOG",dialog:e}}function $(e){return{type:"CREATEMODAL",cModal:e}}function H(e){return{type:"UPDATEMODAL",upModal:e}}function V(e){return{type:"REPDIALOG",repdialog:e}}function Y(e){return{type:"CAMDIALOG",camdialog:e}}function J(e){return{type:"SURDIALOG",surdialog:e}}var Q=Object(s.b)((function(e){return{token:e.userTodo.token,user:e.userTodo.user,current:e.uiTodo.current}}))((function(e){Object(n.useEffect)((function(){(function(){var t=Object(w.a)(y.a.mark((function t(){return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null==e.token){t.next=3;break}return t.next=3,e.dispatch(L(e.token));case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()}),[]);var t=function(){var t=Object(w.a)(y.a.mark((function t(a){return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.dispatch({type:"NAVCURRENT",current:a.key});case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return r.a.createElement(n.Fragment,null,r.a.createElement("div",{style:{height:32,margin:16}},r.a.createElement("div",{style:{textAlign:"center",margin:"0 auto"}},r.a.createElement("b",{style:{fontSize:18,color:"#FFFFFF"}},"SEEiSmart"))),r.a.createElement(x.a,{theme:"dark",mode:"inline",selectedKeys:[e.current],onClick:t},r.a.createElement(x.a.Item,{key:"home"},r.a.createElement(p.b,{to:"/"},r.a.createElement(C.a,null),"\u9996\u9875")),function(){if(2==e.user.admin)return r.a.createElement(x.a.Item,{key:"a1"},r.a.createElement(p.b,{to:"/admin"},r.a.createElement(O.a,null),"\u7528\u6237\u7ba1\u7406"))}(),r.a.createElement(x.a.Item,{key:"streams"},r.a.createElement(p.b,{to:"/streams"},r.a.createElement(T.a,null),"\u63a8\u6d41\u7ba1\u7406")),r.a.createElement(x.a.Item,{key:"record"},r.a.createElement(p.b,{to:"/record"},r.a.createElement(S.a,null),"\u5f55\u50cf\u7ba1\u7406")),r.a.createElement(x.a.Item,{key:"files"},r.a.createElement(p.b,{to:"/files"},r.a.createElement(I.a,null),"\u4e0a\u4f20\u6587\u4ef6\u7ba1\u7406")),r.a.createElement(x.a.Item,{key:"u2"},r.a.createElement(p.b,{to:"/precloud"},r.a.createElement(_.a,null),"\u4e91\u76f4\u64ad\u9884\u89c8")),r.a.createElement(x.a.Item,{key:"u3"},r.a.createElement(p.b,{to:"/setting"},r.a.createElement(j.a,null),"\u5b50\u8d26\u53f7\u7ba1\u7406")),r.a.createElement(x.a.Item,{key:"s2"},r.a.createElement(p.b,{to:"/password"},r.a.createElement(A.a,null),"\u4fee\u6539\u5bc6\u7801")),r.a.createElement(x.a.SubMenu,{key:"ai",title:"AI\u4eba\u8138\u8bc6\u522b"},r.a.createElement(x.a.Item,{key:"ai-1"},r.a.createElement(p.b,{to:"/repository"}),"\u4eba\u50cf\u5e93"),r.a.createElement(x.a.Item,{key:"ai-2"},r.a.createElement(p.b,{to:"/camera"}),"\u76f4\u64ad\u6d41"),r.a.createElement(x.a.Item,{key:"ai-3"},r.a.createElement(p.b,{to:"/surveillance"}),"\u5e03\u63a7"),r.a.createElement(x.a.Item,{key:"ai-4"},r.a.createElement(p.b,{to:"/hit"}),"\u62a5\u8b66"))))})),X=(a(239),a(120)),Z=(a(30),a(6)),ee=a(581),te=a(582);var ae=Object(s.b)((function(e){return{token:e.userTodo.token,user:e.userTodo.user}}))((function(e){return Object(n.useEffect)((function(){(function(){var t=Object(w.a)(y.a.mark((function t(){return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null==e.token){t.next=3;break}return t.next=3,e.dispatch(L(e.token));case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()}),[]),r.a.createElement("div",{style:{position:"relative",width:"100%",height:64,margin:"0 auto"}},r.a.createElement(X.a,{overlay:r.a.createElement(x.a,null,r.a.createElement(x.a.Item,{key:"1"},r.a.createElement(Z.a,{type:"link",onClick:function(){localStorage.removeItem("token"),window.location.reload()},icon:r.a.createElement(ee.a,null)},"\u9000\u51fa\u767b\u5f55")))},r.a.createElement(Z.a,{style:{position:"absolute",top:0,right:0,width:"auto",height:64,borderColor:"#ffffff"}},r.a.createElement(te.a,null),e.user.username)))})),ne=(a(356),a(296));var re=function(){return r.a.createElement(ne.a,{visibilityHeight:150})},oe=(a(46),a(20)),ie=(a(47),a(16)),ce=(a(80),a(12)),se=(a(81),a(26));var le=function(){var e=function(){var e=Object(w.a)(y.a.mark((function e(t){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z.a.post("/api/signIn",{username:t.username,password:t.password}).then((function(e){2e4===e.data.code?(localStorage.setItem("token",e.data.cb.token),window.location.href="/"):D.a.error({message:"\u8d26\u53f7\u6216\u5bc6\u7801\u9519\u8bef",description:"",duration:2})})).catch((function(){D.a.error({message:"Error",description:"Server Error",duration:2})}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(oe.a,{type:"flex",justify:"center",align:"middle"},r.a.createElement(ie.a,{xs:24,sm:12,md:12,lg:12,xl:12,xxl:12},r.a.createElement("div",{style:{margin:0,textAlign:"center"}},r.a.createElement("h1",null,"\u7528\u6237\u767b\u5f55")),r.a.createElement(ce.a,{onFinish:e},r.a.createElement(ce.a.Item,{name:"username",rules:[{type:"string",required:!0,message:"\u8bf7\u8f93\u5165\u7528\u6237\u540d"},{min:6,max:18,message:"\u7528\u6237\u540d\u957f\u5ea6\u4e3a6-18\u4e2a\u5b57\u7b26"}]},r.a.createElement(se.a,{prefix:r.a.createElement(te.a,null),placeholder:"\u7528\u6237\u540d",allowClear:!0})),r.a.createElement(ce.a.Item,{name:"password",rules:[{type:"string",required:!0,message:"\u8bf7\u8f93\u5165\u5bc6\u7801"},{min:6,max:18,message:"\u5bc6\u7801\u957f\u5ea6\u4e3a6-18\u4e2a\u5b57\u7b26"}]},r.a.createElement(se.a.Password,{prefix:r.a.createElement(A.a,null),placeholder:"\u5bc6\u7801",allowClear:!0})),r.a.createElement(ce.a.Item,null,r.a.createElement(Z.a,{type:"primary",block:!0,htmlType:"submit"},"\u767b \u5f55")))))};var ue=Object(s.b)((function(e){return{token:e.userTodo.token}}))((function(e){var t=function(){var t=Object(w.a)(y.a.mark((function t(a){return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fly.post("/api/password",{username:a.username,old:a.old,new:a.new},{headers:{authorization:"Bearer ".concat(e.token)}}).then((function(e){2e4===e.data.code?(notification.success({message:"\u4fee\u6539\u6210\u529f",description:"",duration:2}),setTimeout((function(){window.location.reload()}),2e3)):notification.error({message:"\u8d26\u53f7\u4e0d\u5b58\u5728",description:"",duration:2})})).catch((function(){notification.error({message:"Error",description:"Server Error",duration:2})}));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return r.a.createElement(oe.a,{type:"flex",justify:"center",align:"middle"},r.a.createElement(ie.a,{xs:24,sm:12,md:12,lg:12,xl:12,xxl:12},r.a.createElement("div",{style:{margin:0,textAlign:"center"}},r.a.createElement("h1",null,"\u4fee\u6539\u5bc6\u7801")),r.a.createElement(ce.a,{onFinish:t},r.a.createElement(ce.a.Item,{name:"username",rules:[{min:6,max:18,message:"\u7528\u6237\u540d\u957f\u5ea6\u4e3a6-18\u4e2a\u5b57\u7b26"},{type:"string",required:!0,message:"\u8bf7\u8f93\u5165\u7528\u6237\u540d"}]},r.a.createElement(se.a,{prefix:r.a.createElement(te.a,null),placeholder:"\u7528\u6237\u540d",allowClear:!0})),r.a.createElement(ce.a.Item,{name:"old",rules:[{min:6,max:18,message:"\u5bc6\u7801\u957f\u5ea6\u4e3a6-18\u4e2a\u5b57\u7b26"},{type:"string",required:!0,message:"\u8bf7\u8f93\u5165\u5bc6\u7801"}]},r.a.createElement(se.a.Password,{prefix:r.a.createElement(A.a,null),placeholder:"\u65e7\u5bc6\u7801",allowClear:!0})),r.a.createElement(ce.a.Item,{name:"new",rules:[{min:6,max:18,message:"\u5bc6\u7801\u957f\u5ea6\u4e3a6-18\u4e2a\u5b57\u7b26"},{type:"string",required:!0,message:"\u8bf7\u8f93\u5165\u5bc6\u7801"}]},r.a.createElement(se.a.Password,{prefix:r.a.createElement(A.a,null),placeholder:"\u65b0\u5bc6\u7801",allowClear:!0})),r.a.createElement(ce.a.Item,null,r.a.createElement(Z.a,{type:"primary",block:!0,htmlType:"submit"},"\u4fee \u6539")))))})),de=(a(148),a(84)),me=(a(115),a(57)),pe=(a(55),a(18)),fe=(a(131),a(14)),he=(a(130),a(63)),Ee=a(584),ge=a(585),ke=a(586),be=(a(251),a(99)),xe=a(583);var ve=Object(s.b)((function(e){return{token:e.userTodo.token,unUseCodes:e.userTodo.unUseCodes}}))((function(e){Object(n.useEffect)((function(){(function(){var t=Object(w.a)(y.a.mark((function t(){return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null==e.token){t.next=3;break}return t.next=3,e.dispatch(q(e.token));case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()}),[]);var t=function(){var t=Object(w.a)(y.a.mark((function t(a){return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,z.a.post("/api/subAccount",{phone:a.phone,password:a.password,codeId:a.code},{headers:{authorization:"Bearer ".concat(e.token)}}).then((function(e){2e4===e.data.code?(D.a.success({message:"\u6dfb\u52a0\u6210\u529f",description:"",duration:2}),setTimeout((function(){window.location.reload()}),2e3)):D.a.error({message:"\u6dfb\u52a0\u5931\u8d25",description:"",duration:2})})).catch((function(){D.a.error({message:"Error",description:"Server Error",duration:2})}));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return r.a.createElement(ce.a,{onFinish:t},r.a.createElement(ce.a.Item,{name:"phone",rules:[{type:"string",required:!0,message:"\u8bf7\u8f93\u5165\u624b\u673a\u53f7\u7801"},{pattern:/^(1)\d{10}$/,message:"\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u624b\u673a\u53f7\u7801"}]},r.a.createElement(se.a,{prefix:r.a.createElement(xe.a,null),placeholder:"\u624b\u673a\u53f7\u7801",allowClear:!0})),r.a.createElement(ce.a.Item,{name:"password",rules:[{type:"string",required:!0,message:"\u8bf7\u8f93\u5165\u5bc6\u7801"},{min:6,max:18,message:"\u5bc6\u7801\u957f\u5ea6\u4e3a6-18\u4e2a\u5b57\u7b26"}]},r.a.createElement(se.a.Password,{prefix:r.a.createElement(A.a,null),placeholder:"\u5bc6\u7801",allowClear:!0})),r.a.createElement(ce.a.Item,{name:"codeId",rules:[{type:"string",required:!0,message:"\u8bf7\u9009\u62e9\u4e32\u6d41\u7801"}]},r.a.createElement(be.a,{placeholder:"\u4e32\u6d41\u7801",allowClear:!0},e.unUseCodes.map((function(e){return r.a.createElement(be.a.Option,{value:e._id,key:e._id},e.code)})))),r.a.createElement(ce.a.Item,null,r.a.createElement(Z.a,{type:"primary",block:!0,htmlType:"submit"},"\u6dfb \u52a0")))}));var ye=Object(s.b)((function(e){return{token:e.userTodo.token,codes:e.userTodo.codes,dialog:e.uiTodo.dialog}}))((function(e){Object(n.useEffect)((function(){(function(){var t=Object(w.a)(y.a.mark((function t(){return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null==e.token){t.next=3;break}return t.next=3,e.dispatch(R(e.token));case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()}),[]);var t=function(){var t=Object(w.a)(y.a.mark((function t(a){return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,z.a.post("/api/delSubAccount",{subAccountId:a._id},{headers:{authorization:"Bearer ".concat(e.token)}}).then((function(e){2e4===e.data.code?(D.a.success({message:"\u5220\u9664\u6210\u529f",description:"",duration:2}),setTimeout((function(){window.location.reload()}),2e3)):D.a.error({message:"\u5220\u9664\u5931\u8d25",description:"",duration:2})})).catch((function(){D.a.error({message:"Error",description:"Server Error",duration:2})}));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),a=function(){var t=Object(w.a)(y.a.mark((function t(a){return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,z.a.post("/api/addWhiteList",{code:a.code.code},{headers:{authorization:"Bearer ".concat(e.token)}}).then((function(e){2e4===e.data.code?(D.a.success({message:"\u6dfb\u52a0\u6210\u529f",description:"",duration:2}),setTimeout((function(){window.location.reload()}),2e3)):D.a.error({message:"\u6dfb\u52a0\u5931\u8d25",description:"",duration:2})})).catch((function(){D.a.error({message:"Error",description:"Server Error",duration:2})}));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),o=function(){var t=Object(w.a)(y.a.mark((function t(a){return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,z.a.post("/api/delWhiteList",{code:a.code.code},{headers:{authorization:"Bearer ".concat(e.token)}}).then((function(e){2e4===e.data.code?(D.a.success({message:"\u79fb\u51fa\u6210\u529f",description:"",duration:2}),setTimeout((function(){window.location.reload()}),2e3)):D.a.error({message:"\u79fb\u51fa\u5931\u8d25",description:"",duration:2})})).catch((function(){D.a.error({message:"Error",description:"Server Error",duration:2})}));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return r.a.createElement(b,null,r.a.createElement(n.Fragment,null,r.a.createElement(Z.a,{type:"primary",icon:r.a.createElement(Ee.a,null),onClick:function(){return e.dispatch(K(!0))},style:{marginBottom:10}},"\u6dfb\u52a0\u5b50\u8d26\u53f7"),r.a.createElement(he.a,{visible:e.dialog,footer:null,onCancel:function(){return e.dispatch(K(!1))}},r.a.createElement(oe.a,{type:"flex",justify:"center",align:"middle"},r.a.createElement(ie.a,{xs:24,sm:12,md:12,lg:12,xl:12,xxl:12},r.a.createElement(b,null,r.a.createElement(ve,null))))),r.a.createElement(fe.a,{dataSource:e.codes,rowKey:"_id",scroll:{scrollToFirstRowOnChange:!0},pagination:{simple:!0,total:e.codes.length,pageSize:5}},r.a.createElement(fe.a.Column,{title:"\u5b50\u8d26\u53f7",dataIndex:"phone"}),r.a.createElement(fe.a.Column,{title:"\u4e32\u6d41\u7801",dataIndex:["code","code"]}),r.a.createElement(fe.a.Column,{title:"\u8fc7\u671f\u65f6\u95f4",dataIndex:["code","expireDate"]}),r.a.createElement(fe.a.Column,{title:"\u64cd\u4f5c",dataIndex:"option",render:function(i,c){return e.codes.length>=1?r.a.createElement(n.Fragment,null,r.a.createElement(me.a,{title:"\u786e\u8ba4\u5220\u9664",cancelText:"\u53d6\u6d88",okText:"\u786e\u5b9a",onConfirm:function(){return t(c)}},r.a.createElement(pe.a,{placement:"bottom",title:"\u5220\u9664\u5b50\u8d26\u53f7",arrowPointAtCenter:!0},r.a.createElement(Z.a,{type:"danger",icon:r.a.createElement(ge.a,null)}))),r.a.createElement(de.a,{type:"vertical"}),r.a.createElement(pe.a,{placement:"bottom",title:"\u52a0\u5165\u767d\u540d\u5355",arrowPointAtCenter:!0},r.a.createElement(Z.a,{type:"danger",icon:r.a.createElement(Ee.a,null),onClick:function(){return a(c)}})),r.a.createElement(de.a,{type:"vertical"}),r.a.createElement(pe.a,{placement:"bottom",title:"\u79fb\u51fa\u767d\u540d\u5355",arrowPointAtCenter:!0},r.a.createElement(Z.a,{type:"danger",icon:r.a.createElement(ke.a,null),onClick:function(){return o(c)}}))):null}}))))})),we=(a(207),a(60));var Oe=Object(s.b)((function(e){return{token:e.userTodo.token}}))((function(e){var t=function(){var t=Object(w.a)(y.a.mark((function t(a){return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,z.a.post("/api/codes",{username:a.username},{headers:{authorization:"Bearer ".concat(e.token)}}).then((function(e){2e4===e.data.code?(D.a.success({message:"\u521b\u5efa\u6210\u529f",description:"",duration:2}),setTimeout((function(){window.location.reload()}),2e3)):D.a.error({message:"\u521b\u5efa\u5931\u8d25",description:"",duration:2})})).catch((function(){D.a.error({message:"Error",description:"Server Error",duration:2})}));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return r.a.createElement(ce.a,{onFinish:t},r.a.createElement(ce.a.Item,{name:"username",rules:[{min:6,max:18,message:"\u7528\u6237\u540d\u957f\u5ea6\u4e3a6-18\u4e2a\u5b57\u7b26"},{type:"string",required:!0,message:"\u8bf7\u8f93\u5165\u7528\u6237\u540d"}]},r.a.createElement(se.a,{prefix:r.a.createElement(te.a,null),placeholder:"\u7528\u6237\u540d",allowClear:!0})),r.a.createElement(ce.a.Item,null,r.a.createElement(Z.a,{type:"primary",block:!0,htmlType:"submit"},"\u521b\u5efa\u4e32\u6d41\u7801")))}));var Ce=Object(s.b)((function(e){return{token:e.userTodo.token}}))((function(e){var t=function(){var t=Object(w.a)(y.a.mark((function t(a){return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,z.a.put("/api/codes",{code:a.code},{headers:{authorization:"Bearer ".concat(e.token)}}).then((function(e){2e4===e.data.code?(D.a.success({message:"\u7eed\u671f\u6210\u529f",description:"",duration:2}),setTimeout((function(){window.location.reload()}),2e3)):D.a.error({message:"\u7eed\u671f\u5931\u8d25",description:"",duration:2})})).catch((function(){D.a.error({message:"Error",description:"Server Error",duration:2})}));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return r.a.createElement(ce.a,{onFinish:t},r.a.createElement(ce.a.Item,{name:"code",rules:[{min:40,max:40,message:"\u4e32\u6d41\u7801\u957f\u5ea6\u4e3a40\u4e2a\u5b57\u7b26"},{type:"string",required:!0,message:"\u8bf7\u8f93\u5165\u4e32\u6d41\u7801"}]},r.a.createElement(se.a,{placeholder:"\u4e32\u6d41\u7801",allowClear:!0})),r.a.createElement(ce.a.Item,null,r.a.createElement(Z.a,{type:"primary",block:!0,htmlType:"submit"},"\u7eed \u671f")))}));var Te=Object(s.b)((function(e){return{token:e.userTodo.token,users:e.userTodo.users,accounts:e.userTodo.accounts,allCodes:e.userTodo.allCodes,cModal:e.uiTodo.cModal,upModal:e.uiTodo.upModal}}))((function(e){return Object(n.useEffect)((function(){(function(){var t=Object(w.a)(y.a.mark((function t(){return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null==e.token){t.next=7;break}return t.next=3,e.dispatch(U(e.token));case 3:return t.next=5,e.dispatch(P(e.token));case 5:return t.next=7,e.dispatch(M(e.token));case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()}),[]),r.a.createElement(b,null,r.a.createElement(we.a,{defaultActiveKey:"1",tabBarExtraContent:r.a.createElement(n.Fragment,null,r.a.createElement(Z.a,{type:"primary",onClick:function(){return e.dispatch($(!0))}},"\u751f\u6210\u4e32\u6d41\u7801"),r.a.createElement(he.a,{visible:e.cModal,footer:null,onCancel:function(){return e.dispatch($(!1))}},r.a.createElement(oe.a,{type:"flex",justify:"center",align:"middle"},r.a.createElement(ie.a,{xs:24,sm:12,md:12,lg:12,xl:12,xxl:12},r.a.createElement(b,null,r.a.createElement(Oe,null))))),r.a.createElement(de.a,{type:"vertical"}),r.a.createElement(Z.a,{type:"primary",onClick:function(){return e.dispatch(H(!0))}},"\u4e32\u6d41\u7801\u7eed\u671f"),r.a.createElement(he.a,{visible:e.upModal,footer:null,onCancel:function(){return e.dispatch(H(!1))}},r.a.createElement(oe.a,{type:"flex",justify:"center",align:"middle"},r.a.createElement(ie.a,{xs:24,sm:12,md:12,lg:12,xl:12,xxl:12},r.a.createElement(b,null,r.a.createElement(Ce,null))))))},r.a.createElement(we.a.TabPane,{tab:"\u4e3b\u8d26\u53f7\u4fe1\u606f",key:"1"},r.a.createElement(fe.a,{dataSource:e.users,rowKey:"_id",scroll:{scrollToFirstRowOnChange:!0},pagination:{simple:!0,total:e.users.length,pageSize:5}},r.a.createElement(fe.a.Column,{title:"\u7528\u6237\u540d",dataIndex:"username"}),r.a.createElement(fe.a.Column,{title:"\u5b50\u8d26\u53f7\u6570\u91cf",dataIndex:["subAccount","length"]}),r.a.createElement(fe.a.Column,{title:"\u4e32\u6d41\u7801\u6570\u91cf",dataIndex:["codes","length"]}),r.a.createElement(fe.a.Column,{title:"\u63a8\u6d41\u5730\u5740",dataIndex:"ips",key:"ips"}),r.a.createElement(fe.a.Column,{title:"\u4e91\u63a8\u6d41\u5730\u5740",dataIndex:"cloudAddress"}),r.a.createElement(fe.a.Column,{title:"\u6743\u9650",dataIndex:"admin"}))),r.a.createElement(we.a.TabPane,{tab:"\u5b50\u8d26\u53f7\u4fe1\u606f",key:"2"},r.a.createElement(fe.a,{dataSource:e.accounts,rowKey:"_id",scroll:{scrollToFirstRowOnChange:!0},pagination:{simple:!0,total:e.accounts.length,pageSize:5}},r.a.createElement(fe.a.Column,{title:"\u5b50\u8d26\u53f7",dataIndex:"phone"}),r.a.createElement(fe.a.Column,{title:"\u7ed1\u5b9a\u4e32\u6d41\u7801",dataIndex:["code","code"]}),r.a.createElement(fe.a.Column,{title:"\u4e32\u6d41\u7801\u8fc7\u671f\u65f6\u95f4",dataIndex:["code","expireDate"]}),r.a.createElement(fe.a.Column,{title:"\u4e3b\u8d26\u53f7",dataIndex:["user","username"]}))),r.a.createElement(we.a.TabPane,{tab:"\u4e32\u6d41\u7801\u4fe1\u606f",key:"3"},r.a.createElement(fe.a,{dataSource:e.allCodes,rowKey:"_id",scroll:{scrollToFirstRowOnChange:!0},pagination:{simple:!0,total:e.allCodes.length,pageSize:5}},r.a.createElement(fe.a.Column,{title:"\u4e32\u6d41\u7801",dataIndex:"code"}),r.a.createElement(fe.a.Column,{title:"\u8fc7\u671f\u65f6\u95f4",dataIndex:"expireDate"}),r.a.createElement(fe.a.Column,{title:"\u7ed1\u5b9a\u5b50\u8d26\u53f7",dataIndex:["subAccount","phone"]}),r.a.createElement(fe.a.Column,{title:"\u4e3b\u8d26\u53f7",dataIndex:["user","username"]})))))})),Se=a(173),Ie=a.n(Se);var _e=Object(s.b)((function(e){return{token:e.userTodo.token}}))(Object(m.g)((function(e){var t=Object(n.useState)("127.0.0.1");return Object(n.useEffect)((function(){(function(){var t=Object(w.a)(y.a.mark((function t(){return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,z.a.get("/api/viewIp",{code:e.match.params.id},{headers:{authorization:"Bearer ".concat(e.token)}}).then((function(e){2e4===e.data.code||notification.error({message:"\u83b7\u53d6\u5931\u8d25",description:"",duration:2})})).catch((function(){notification.error({message:"Error",description:"Server Error",duration:2})}));case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()}),[]),r.a.createElement(Ie.a,{url:"http://".concat(t[0],":1935/live/").concat(e.match.params.id,"/playlist.m3u8"),controls:!0,playing:!0,muted:!0,width:"100%",height:"100%"})})));var je=Object(m.g)((function(e){return r.a.createElement(Ie.a,{url:"http://dniondirecthls.seei.tv/liveTarget/".concat(e.match.params.id,"/index.m3u8"),controls:!0,playing:!0,muted:!0,width:"100%",height:"100%"})})),Ae=(a(129),a(64)),De=(a(149),a(42));var Fe=Object(s.b)((function(e){return{token:e.userTodo.token,user:e.userTodo.user,codes:e.userTodo.codes}}))((function(e){return Object(n.useEffect)((function(){(function(){var t=Object(w.a)(y.a.mark((function t(){return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null==e.token){t.next=5;break}return t.next=3,e.dispatch(L(e.token));case 3:return t.next=5,e.dispatch(R(e.token));case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()}),[]),r.a.createElement(n.Fragment,null,r.a.createElement(oe.a,{gutter:[10,10]},e.codes.map((function(e){return r.a.createElement(ie.a,{xs:24,sm:6,md:6,lg:6,xl:6,xxl:6,key:e._id},r.a.createElement(p.b,{to:"/cloud/".concat(e.code.code)},r.a.createElement(pe.a,{placement:"top",title:"\u70b9\u51fb\u9884\u89c8",arrowPointAtCenter:!0},r.a.createElement(De.a,{hoverable:!0,cover:r.a.createElement("div",{style:{background:"#000000",height:168}},r.a.createElement("div",{style:{textAlign:"center",margin:0}},r.a.createElement("b",{style:{color:"#FFFFFF",fontSize:24}},"\u4e91\u76f4\u64ad\u9884\u89c8")))},r.a.createElement(De.a.Meta,{title:e.code.title})))))}))),r.a.createElement(Ae.a,{simple:!0,total:e.codes.length,pageSize:8,style:{textAlign:"center",margin:"15px auto 0"}}))})),ze=a(136);var Be=function(e){Object(k.a)(a,e);var t=Object(g.a)(a);function a(){var e;Object(h.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={cpu:[],totalmem:0,freemem:0,diskFree:0,diskUsed:0,cpuUser:0},e}return Object(E.a)(a,[{key:"componentDidMount",value:function(){var e=Object(w.a)(y.a.mark((function e(){var t,a,n,r,o,i,c=this;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==this.props.token){e.next=3;break}return e.next=3,z.a.get("/api/os",{},{headers:{authorization:"Bearer ".concat(this.props.token)}}).then((function(e){2e4===e.data.code?c.setState({cpu:e.data.cpu,totalmem:e.data.totalmem,freemem:e.data.freemem,diskFree:e.data.diskFree,diskUsed:e.data.diskUsed,cpuUser:e.data.cpuUser}):D.a.error({message:"\u83b7\u53d6\u670d\u52a1\u5668\u4fe1\u606f\u5931\u8d25",description:"",duration:2})})).catch((function(){D.a.error({message:"Error",description:"Server Error",duration:2})}));case 3:t=new ze.a({container:"c1",height:350,padding:"auto",autoFit:!0}),a=[{time:"1\u5206\u949f",load:Number(this.state.cpu[0].toFixed(2))},{time:"5\u5206\u949f",load:Number(this.state.cpu[1].toFixed(2))},{time:"15\u5206\u949f",load:Number(this.state.cpu[2].toFixed(2))}],t.data(a),t.scale("sales",{nice:!0}),t.interval().position("time*load"),t.render(),Object(ze.b)("point","pointer",{draw:function(e,t){var a=this.parsePoint({x:0,y:0});return t.addShape("line",{attrs:{x1:a.x,y1:a.y,x2:e.x,y2:e.y,stroke:e.color,lineWidth:5,lineCap:"round"}}),t.addShape("circle",{attrs:{x:a.x,y:a.y,r:9,stroke:e.color,lineWidth:4,fill:"#fff"}})}}),n=[{value:this.state.totalmem-this.state.freemem}],(r=new ze.a({container:"c2",autoFit:!0,height:350,padding:"auto"})).data(n),r.coordinate("polar",{startAngle:-9/8*Math.PI,endAngle:1/8*Math.PI,radius:1}),r.scale("value",{min:0,max:Math.round(this.state.totalmem),tickInterval:1,nice:!0}),r.axis("1",!1),r.axis("value",{zIndex:2,line:null,label:{offset:-36,style:{fontSize:18,textAlign:"center",textBaseline:"middle"}},subTickLine:{count:4,length:-22},tickLine:{length:-24,stroke:"#fff",strokeOpacity:1},grid:null}),r.legend(!1).point().position("value*1").shape("pointer").color("#1890FF"),r.annotation().arc({top:!1,start:[0,.94],end:[Math.round(this.state.totalmem),.94],style:{stroke:"#CBCBCB",lineWidth:18}}),r.annotation().arc({start:[0,.94],end:[n[0].value,.94],style:{stroke:"#1890FF",lineWidth:18,lineDash:null}}),r.annotation().text({position:["50%","90%"],content:"".concat((this.state.totalmem-this.state.freemem).toFixed(2),"GB"),style:{fontSize:20,textAlign:"center"}}),r.annotation().text({position:["50%","90%"],content:"".concat(((this.state.totalmem-this.state.freemem)/this.state.totalmem*100).toFixed(2),"%"),style:{fontSize:24,textAlign:"center"},offsetY:24}),r.render(),o=[{country:"\u7a7a\u95f2",population:this.state.diskFree},{country:"\u5df2\u7528",population:this.state.diskUsed}],(i=new ze.a({container:"c3",autoFit:!0,height:350,padding:"auto"})).data(o),i.scale("sales",{nice:!0}),i.axis("country",{label:{offset:12}}),i.coordinate().transpose(),i.interval().position("country*population"),i.render();case 31:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement(b,null,r.a.createElement(oe.a,{gutter:[10,10]},r.a.createElement(ie.a,{xs:24,sm:8,md:8,lg:8,xl:8,xxl:8},r.a.createElement(De.a,null,r.a.createElement("b",null,"CPU\u8d1f\u8f7d(\u5355\u4f4d\uff1a%)\uff0cCPU\u4f7f\u7528\u7387\uff1a","".concat(this.state.cpuUser,"%")),r.a.createElement("div",{id:"c1"}))),r.a.createElement(ie.a,{xs:24,sm:8,md:8,lg:8,xl:8,xxl:8},r.a.createElement(De.a,null,r.a.createElement("b",null,"\u786c\u76d8\u4f7f\u7528(\u5355\u4f4d\uff1aGB/%)\uff1a","".concat((this.state.diskUsed/(this.state.diskFree+this.state.diskUsed)*100).toFixed(2),"%")),r.a.createElement("div",{id:"c3"}))),r.a.createElement(ie.a,{xs:24,sm:8,md:8,lg:8,xl:8,xxl:8},r.a.createElement(De.a,null,r.a.createElement("b",null,"\u5185\u5b58\u4f7f\u7528(\u5355\u4f4d\uff1aGB/%)"),r.a.createElement("div",{id:"c2"})))))}}]),a}(r.a.Component),Le=Object(s.b)((function(e){return{token:e.userTodo.token}}))(Be);var Re=Object(s.b)((function(e){return{token:e.userTodo.token,streams:e.userTodo.streams,homeDir:e.userTodo.homeDir}}))((function(e){var t=Object(n.useState)("127.0.0.1");Object(n.useEffect)((function(){(function(){var t=Object(w.a)(y.a.mark((function t(){return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null==e.token){t.next=5;break}return t.next=3,e.dispatch(N(e.token));case 3:return t.next=5,e.dispatch(B(e.token));case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()}),[]);var a=function(){var a=Object(w.a)(y.a.mark((function a(n){return y.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,z.a.get("http://".concat(t[0],":8086/livestreamrecord?app=live&streamname=").concat(n.code,"&outputPath=").concat(e.homeDir,"/StreamsRecord&fileTemplate=").concat(n.title,"_${RecordingStartTime}_${SegmentNumber}&action=startRecordingSegmentByDuration"),{},{headers:{accept:"application/json","Content-Type":"application/x-www-form-urlencoded"}}).then((function(){D.a.success({message:"\u5f00\u59cb\u5f55\u5236",description:"",duration:2})})).catch((function(){D.a.error({message:"Error",description:"Server Error",duration:2})}));case 2:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),o=function(){var e=Object(w.a)(y.a.mark((function e(a){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z.a.get("http://".concat(t[0],":8086/livestreamrecord?app=live&streamname=").concat(a.code,"&action=stopRecording"),{},{headers:{accept:"application/json","Content-Type":"application/x-www-form-urlencoded"}}).then((function(){D.a.success({message:"\u7ed3\u675f\u5f55\u5236",description:"",duration:2})})).catch((function(){D.a.error({message:"Error",description:"Server Error",duration:2})}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return 0===e.streams.length?r.a.createElement("div",null,r.a.createElement("div",{style:{textAlign:"center",margin:"0 auto"}},r.a.createElement("h2",null,"\u5f53\u524d\u6ca1\u6709\u63a8\u6d41"))):r.a.createElement(b,null,r.a.createElement(n.Fragment,null,r.a.createElement(oe.a,{gutter:[10,10]},e.streams.map((function(e){return r.a.createElement(ie.a,{xs:24,sm:6,md:6,lg:6,xl:6,xxl:6,key:e._id},r.a.createElement(pe.a,{placement:"top",title:"\u70b9\u51fb\u9884\u89c8",arrowPointAtCenter:!0},r.a.createElement(De.a,{hoverable:!0,actions:[r.a.createElement(pe.a,{placement:"top",title:"\u5f00\u59cb\u5f55\u5236",arrowPointAtCenter:!0},r.a.createElement(Z.a,{type:"danger",shape:"circle",onClick:function(){return a(e)}}," ")),r.a.createElement(pe.a,{placement:"top",title:"\u7ed3\u675f\u5f55\u5236",arrowPointAtCenter:!0},r.a.createElement(Z.a,{type:"danger",style:{backgroundColor:"black",borderColor:"black"},onClick:function(){return o(e)}}," "))],cover:r.a.createElement(p.b,{to:"/view/".concat(e.code)},r.a.createElement("div",{style:{background:"#000000",height:168}},r.a.createElement("div",{style:{textAlign:"center",margin:0}},r.a.createElement("b",{style:{color:"#FFFFFF",fontSize:24}},"\u76f4\u64ad\u9884\u89c8"))))},r.a.createElement(p.b,{to:"/view/".concat(e.code)},r.a.createElement(De.a.Meta,{title:e.title})))))}))),r.a.createElement(Ae.a,{simple:!0,total:e.streams.length,pageSize:8,style:{textAlign:"center",margin:"15px auto 0"}})))})),Ue=(a(264),a(179));var Pe=Object(s.b)((function(e){return{token:e.userTodo.token}}))((function(e){var t=function(){var t=Object(w.a)(y.a.mark((function t(a){return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,z.a.post("/api/apkSave",{version:a.version,detail:a.detail},{headers:{authorization:"Bearer ".concat(e.token)}}).then((function(e){2e4===e.data.code?(D.a.success({message:"\u63d0\u4ea4\u6210\u529f",description:"",duration:2}),setTimeout((function(){window.location.reload()}),2e3)):D.a.error({message:"\u63d0\u4ea4\u5931\u8d25",description:"",duration:2})})).catch((function(){D.a.error({message:"Error",description:"Server Error",duration:2})}));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return r.a.createElement(oe.a,{type:"flex",justify:"center",align:"middle"},r.a.createElement(ie.a,{xs:24,sm:12,md:12,lg:12,xl:12,xxl:12},r.a.createElement(ce.a,{onFinish:t},r.a.createElement(ce.a.Item,{name:"version",rules:[{type:"string",required:!0,message:"\u8bf7\u8f93\u5165apk\u7248\u672c\u53f7"},{pattern:/^[0-9]{1,3}$/,message:"apk\u7248\u672c\u53f7\u4e3a\u6b63\u6574\u6570"},{min:1,max:3,message:"apk\u7248\u672c\u53f7\u957f\u5ea6\u4e3a1-3\u4e2a\u5b57\u7b26"}]},r.a.createElement(se.a,{placeholder:"apk\u7248\u672c\u53f7",allowClear:!0})),r.a.createElement(ce.a.Item,{name:"detail",rules:[{type:"string",required:!0,message:"\u8bf7\u8f93\u5165apk\u4fe1\u606f"},{min:1,max:200,message:"apk\u4fe1\u606f\u957f\u5ea6\u4e3a1-200\u4e2a\u5b57\u7b26"}]},r.a.createElement(se.a.TextArea,{placeholder:"apk\u4fe1\u606f",allowClear:!0,autoSize:!0})),r.a.createElement(ce.a.Item,{required:!0},r.a.createElement(Ue.a,{name:"file",action:"/api/apkUpload",headers:{authorization:"Bearer ".concat(e.token)},accept:".apk"},r.a.createElement(Z.a,null,"\u4e0a\u4f20APK"))),r.a.createElement(ce.a.Item,null,r.a.createElement(Z.a,{type:"primary",block:!0,htmlType:"submit"},"\u4fdd \u5b58")))))})),Me=(a(263),a(122));var qe=Object(s.b)((function(e){return{token:e.userTodo.token,fileList:e.userTodo.fileList,homeDir:e.userTodo.homeDir}}))((function(e){Object(n.useEffect)((function(){(function(){var t=Object(w.a)(y.a.mark((function t(){return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null==e.token){t.next=5;break}return t.next=3,e.dispatch(W(e.token));case 3:return t.next=5,e.dispatch(B(e.token));case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()}),[]);var t=function(){var t=Object(w.a)(y.a.mark((function t(a){return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,z.a.post("/api/fileList",{name:a},{headers:{authorization:"Bearer ".concat(e.token)}}).then((function(e){2e4===e.data.code?(D.a.success({message:"\u5220\u9664\u6210\u529f",description:"",duration:2}),setTimeout((function(){window.location.reload()}),2e3)):D.a.error({message:"\u5220\u9664\u5931\u8d25",description:"",duration:2})})).catch((function(){D.a.error({message:"Error",description:"Server Error",duration:2})}));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return r.a.createElement(Me.b,{dataSource:e.fileList,header:r.a.createElement("b",null,"\u5f55\u50cf\u6587\u4ef6"),pagination:{simple:!0,total:e.fileList.length,pageSize:5},renderItem:function(a){return r.a.createElement(Me.b.Item,{actions:[r.a.createElement(me.a,{title:"\u786e\u8ba4\u5220\u9664",cancelText:"\u53d6\u6d88",okText:"\u786e\u5b9a",onConfirm:function(){return t(a)}},r.a.createElement(pe.a,{placement:"bottom",title:"\u5220\u9664",arrowPointAtCenter:!0},r.a.createElement(Z.a,{type:"danger",icon:r.a.createElement(ge.a,null),size:"small"})))]},"".concat(e.homeDir,"/StreamsRecord/"),a)}})}));var Ne=Object(s.b)((function(e){return{token:e.userTodo.token,uploadFiles:e.userTodo.uploadFiles,homeDir:e.userTodo.homeDir}}))((function(e){Object(n.useEffect)((function(){(function(){var t=Object(w.a)(y.a.mark((function t(){return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null==e.token){t.next=5;break}return t.next=3,e.dispatch(G(e.token));case 3:return t.next=5,e.dispatch(B(e.token));case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()}),[]);var t=function(){var t=Object(w.a)(y.a.mark((function t(a){return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,z.a.post("/api/uploadFiles",{name:a.name},{headers:{authorization:"Bearer ".concat(e.token)}}).then((function(e){2e4===e.data.code?(D.a.success({message:"\u5220\u9664\u6210\u529f",description:"",duration:2}),setTimeout((function(){window.location.reload()}),2e3)):D.a.error({message:"\u5220\u9664\u5931\u8d25",description:"",duration:2})})).catch((function(){D.a.error({message:"Error",description:"Server Error",duration:2})}));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return r.a.createElement(Me.b,{dataSource:e.uploadFiles,header:r.a.createElement("b",null,"\u5df2\u4e0a\u4f20\u6587\u4ef6"),pagination:{simple:!0,total:e.uploadFiles.length,pageSize:5},renderItem:function(e){return r.a.createElement(Me.b.Item,{actions:[r.a.createElement(me.a,{title:"\u786e\u8ba4\u5220\u9664",cancelText:"\u53d6\u6d88",okText:"\u786e\u5b9a",onConfirm:function(){return t(e)}},r.a.createElement(pe.a,{placement:"bottom",title:"\u5220\u9664",arrowPointAtCenter:!0},r.a.createElement(Z.a,{type:"danger",icon:r.a.createElement(ge.a,null),size:"small"})))]},e.path,e.name)}})})),We=(a(562),a(229));var Ge=function(e){return function(t,a){z.a.get("/api/repository",{},{headers:{authorization:"Bearer ".concat(e.token),session_id:e.session_id}}).then((function(e){2e4===e.data.code?t({type:"REPOSITORY",repository:e.data.cb}):D.a.error({message:e.data.err,description:"",duration:2})})).catch((function(){D.a.error({message:"Error",description:"Server Error",duration:2})}))}};var Ke=function(e){return function(t,a){z.a.get("/api/camera",{},{headers:{authorization:"Bearer ".concat(e.token),session_id:e.session_id}}).then((function(e){2e4===e.data.code?t({type:"CAMERA",camera:e.data.cb}):D.a.error({message:e.data.err,description:"",duration:2})})).catch((function(){D.a.error({message:"Error",description:"Server Error",duration:2})}))}};var $e=function(e){return function(t,a){z.a.get("/api/task",{},{headers:{authorization:"Bearer ".concat(e.token),session_id:e.session_id}}).then((function(e){2e4===e.data.code?t({type:"SURVEILLANCE",surveillance:e.data.cb}):D.a.error({message:e.data.err,description:"",duration:2})})).catch((function(){D.a.error({message:"Error",description:"Server Error",duration:2})}))}};var He=function(e){return function(t,a){z.a.get("/api/task",{},{headers:{authorization:"Bearer ".concat(e.token),session_id:e.session_id}}).then((function(a){if(2e4===a.data.code){for(var n=[],r=0;r<a.data.cb.length;r++)n.push(a.data.cb[r].id);z.a.post("/api/realtime",{surveillance_ids:n,hit_condition:{},limit:100},{headers:{authorization:"Bearer ".concat(e.token),session_id:e.session_id}}).then((function(e){2e4===e.data.code?t({type:"REALTIME",realtime:e.data.cb}):D.a.error({message:e.data.err,description:"",duration:2})})).catch((function(){D.a.error({message:"Error",description:"Server Error",duration:2})}))}else D.a.error({message:a.data.err,description:"",duration:2})})).catch((function(){D.a.error({message:"Error",description:"Server Error",duration:2})}))}};var Ve=function(e){return function(t,a){z.a.get("/api/task",{},{headers:{authorization:"Bearer ".concat(e.token),session_id:e.session_id}}).then((function(a){if(2e4===a.data.code){for(var n=[],r=0;r<a.data.cb.length;r++)n.push(a.data.cb[r].id);z.a.post("/api/alert",{surveillance_ids:n,hit_condition:{},order:{timestamp:-1},start:0,limit:100},{headers:{authorization:"Bearer "+e.token,session_id:e.session_id}}).then((function(e){2e4===e.data.code?t({type:"ALERT",alert:e.data.cb}):D.a.error({message:e.data.err,description:"",duration:2})})).catch((function(){D.a.error({message:"Error",description:"Server Error",duration:2})}))}else D.a.error({message:a.data.err,description:"",duration:2})})).catch((function(){D.a.error({message:"Error",description:"Server Error",duration:2})}))}};function Ye(e){return{type:"SESSION_ID",session_id:e}}var Je=Object(s.b)((function(e){return{token:e.userTodo.token,session_id:e.aiTodo.session_id}}))((function(e){Object(n.useEffect)((function(){(function(){var t=Object(w.a)(y.a.mark((function t(){return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null==e.token){t.next=4;break}if(""!=e.session_id){t.next=4;break}return t.next=4,z.a.get("/api/yituLogin",{},{headers:{authorization:"Bearer ".concat(e.token)}}).then((function(t){e.dispatch(Ye(t.data.cb))})).catch((function(){D.a.error({message:"Error",description:"Server Error",duration:2})}));case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()}),[]);var t=function(){var t=Object(w.a)(y.a.mark((function t(a){return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,z.a.post("/api/repository",{name:a.name},{headers:{authorization:"Bearer ".concat(e.token),session_id:e.session_id}}).then((function(e){2e4===e.data.code?(D.a.success({message:"\u6dfb\u52a0\u6210\u529f",description:"",duration:2}),setTimeout((function(){window.location.reload()}),2e3)):D.a.error({message:"\u6dfb\u52a0\u5931\u8d25",description:"",duration:2})})).catch((function(){D.a.error({message:"Error",description:"Server Error",duration:2})}));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return r.a.createElement(ce.a,{onFinish:t},r.a.createElement(FormItem,{name:"name",rules:[{type:"string",required:!0,message:"\u8bf7\u8f93\u5165\u5e93\u540d\u79f0"}]},r.a.createElement(se.a,{placeholder:"\u5e93\u540d\u79f0",allowClear:!0})),r.a.createElement(FormItem,null,r.a.createElement(Z.a,{type:"primary",block:!0,htmlType:"submit"},"\u65b0 \u5efa")))}));var Qe=Object(s.b)((function(e){return{token:e.userTodo.token,repository:e.aiTodo.repository,repdialog:e.uiTodo.repdialog,session_id:e.aiTodo.session_id}}))((function(e){Object(n.useEffect)((function(){(function(){var t=Object(w.a)(y.a.mark((function t(){return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null==e.token){t.next=7;break}if(""!=e.session_id){t.next=6;break}return t.next=4,z.a.get("/api/yituLogin",{},{headers:{authorization:"Bearer ".concat(e.token)}}).then((function(t){e.dispatch(Ye(t.data.cb)),e.dispatch(Ge({token:e.token,session_id:t.data.cb}))})).catch((function(){D.a.error({message:"Error",description:"Server Error",duration:2})}));case 4:t.next=7;break;case 6:e.dispatch(Ge({token:e.token,session_id:e.session_id}));case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()}),[]);var t=function(){var t=Object(w.a)(y.a.mark((function t(a){return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,z.a.post("/api/delRepository",{id:a.id},{headers:{authorization:"Bearer ".concat(e.token),session_id:e.session_id}}).then((function(e){2e4===e.data.code?(D.a.success({message:"\u5220\u9664\u6210\u529f",description:"",duration:2}),setTimeout((function(){window.location.reload()}),2e3)):D.a.error({message:"\u5220\u9664\u5931\u8d25",description:"",duration:2})})).catch((function(){D.a.error({message:"Error",description:"Server Error",duration:2})}));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),a=function(e){"done"===e.file.status?(We.a.success("".concat(e.file.name," file uploaded successfully")),setTimeout((function(){window.location.reload()}),2e3)):"error"===e.file.status&&We.a.error("".concat(e.file.name," file upload failed"))};return r.a.createElement(b,null,r.a.createElement(n.Fragment,null,r.a.createElement(Z.a,{type:"primary",icon:r.a.createElement(Ee.a,null),onClick:function(){return e.dispatch(V(!0))},style:{marginBottom:10}},"\u65b0\u5efa\u4eba\u50cf\u5e93"),r.a.createElement(he.a,{visible:e.repdialog,footer:null,onCancel:function(){return e.dispatch(V(!1))}},r.a.createElement(oe.a,{type:"flex",justify:"center",align:"middle"},r.a.createElement(ie.a,{xs:24,sm:12,md:12,lg:12,xl:12,xxl:12},r.a.createElement(b,null,r.a.createElement(Je,null))))),r.a.createElement(fe.a,{dataSource:e.repository,rowKey:"id",scroll:{scrollToFirstRowOnChange:!0},pagination:{simple:!0,total:e.repository.length,pageSize:5}},r.a.createElement(fe.a.Column,{title:"\u5e93ID",dataIndex:"id"}),r.a.createElement(fe.a.Column,{title:"\u5e93\u540d\u79f0",dataIndex:"name"}),r.a.createElement(fe.a.Column,{title:"\u5e93\u4e2d\u4eba\u8138\u6570\u76ee",dataIndex:"face_image_num"}),r.a.createElement(fe.a.Column,{title:"\u521b\u5efa\u65f6\u95f4",dataIndex:"create_time"}),r.a.createElement(fe.a.Column,{title:"\u64cd\u4f5c",dataIndex:"option",render:function(o,i){return e.repository.length>=1?r.a.createElement(n.Fragment,null,r.a.createElement(Ue.a,{action:"/api/batchSinglePerson",onChange:a,showUploadList:!1,headers:{authorization:"Bearer "+e.token,session_id:e.session_id,repid:i.id}},r.a.createElement(pe.a,{placement:"bottom",title:"\u6dfb\u52a0\u4eba\u50cf",arrowPointAtCenter:!0},r.a.createElement(Z.a,{icon:r.a.createElement(Ee.a,null)}))),r.a.createElement(de.a,{type:"vertical"}),r.a.createElement(me.a,{title:"\u786e\u8ba4\u5220\u9664",cancelText:"\u53d6\u6d88",okText:"\u786e\u5b9a",onConfirm:function(){return t(i)}},r.a.createElement(pe.a,{placement:"bottom",title:"\u5220\u9664\u4eba\u50cf\u5e93",arrowPointAtCenter:!0},r.a.createElement(Z.a,{type:"danger",icon:r.a.createElement(ge.a,null)})))):null}}))))})),Xe=a(587);var Ze=Object(s.b)((function(e){return{token:e.userTodo.token,session_id:e.aiTodo.session_id}}))((function(e){Object(n.useEffect)((function(){(function(){var t=Object(w.a)(y.a.mark((function t(){return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null==e.token){t.next=4;break}if(""!=e.session_id){t.next=4;break}return t.next=4,z.a.get("/api/yituLogin",{},{headers:{authorization:"Bearer ".concat(e.token)}}).then((function(t){e.dispatch(Ye(t.data.cb))})).catch((function(){D.a.error({message:"Error",description:"Server Error",duration:2})}));case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()}),[]);var t=function(){var t=Object(w.a)(y.a.mark((function t(a){return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,z.a.post("/api/camera",{name:a.name,url:a.url},{headers:{authorization:"Bearer ".concat(e.token),session_id:e.session_id}}).then((function(e){2e4===e.data.code?(D.a.success({message:"\u6dfb\u52a0\u6210\u529f",description:"",duration:2}),setTimeout((function(){window.location.reload()}),2e3)):D.a.error({message:"\u6dfb\u52a0\u5931\u8d25",description:"",duration:2})})).catch((function(){D.a.error({message:"Error",description:"Server Error",duration:2})}));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return r.a.createElement(ce.a,{onFinish:t},r.a.createElement(ce.a.Item,{name:"name",rules:[{type:"string",required:!0,message:"\u8bf7\u8f93\u5165\u76f4\u64ad\u6d41\u540d\u79f0"}]},r.a.createElement(se.a,{placeholder:"\u76f4\u64ad\u6d41\u540d\u79f0",allowClear:!0})),r.a.createElement(ce.a.Item,{name:"url",rules:[{type:"string",required:!0,message:"\u8bf7\u8f93\u5165\u76f4\u64ad\u6d41\u5730\u5740"}]},r.a.createElement(se.a,{placeholder:"\u76f4\u64ad\u6d41\u5730\u5740",allowClear:!0})),r.a.createElement(ce.a.Item,null,r.a.createElement(Z.a,{type:"primary",block:!0,htmlType:"submit"},"\u65b0 \u5efa")))}));var et=Object(s.b)((function(e){return{token:e.userTodo.token,camera:e.aiTodo.camera,camdialog:e.uiTodo.camdialog,session_id:e.aiTodo.session_id}}))((function(e){Object(n.useEffect)((function(){(function(){var t=Object(w.a)(y.a.mark((function t(){return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null==e.token){t.next=7;break}if(""!=e.session_id){t.next=6;break}return t.next=4,z.a.get("/api/yituLogin",{},{headers:{authorization:"Bearer ".concat(e.token)}}).then((function(t){e.dispatch(Ye(t.data.cb)),e.dispatch(Ke({token:e.token,session_id:t.data.cb}))})).catch((function(){D.a.error({message:"Error",description:"Server Error",duration:2})}));case 4:t.next=7;break;case 6:e.dispatch(Ke({token:e.token,session_id:e.session_id}));case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()}),[]);var t=function(){var t=Object(w.a)(y.a.mark((function t(a){return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,z.a.post("/api/delCamera",{id:a.id},{headers:{authorization:"Bearer ".concat(e.token),session_id:e.session_id}}).then((function(e){2e4===e.data.code?(D.a.success({message:"\u5220\u9664\u6210\u529f",description:"",duration:2}),setTimeout((function(){window.location.reload()}),2e3)):D.a.error({message:"\u5220\u9664\u5931\u8d25",description:"",duration:2})})).catch((function(){D.a.error({message:"Error",description:"Server Error",duration:2})}));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),a=function(){var t=Object(w.a)(y.a.mark((function t(a){return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,z.a.post("/api/putCamera",{id:a.id,enabled:1},{headers:{authorization:"Bearer ".concat(e.token),session_id:e.session_id}}).then((function(e){2e4===e.data.code?(D.a.success({message:"\u4fee\u6539\u6210\u529f",description:"",duration:2}),setTimeout((function(){window.location.reload()}),2e3)):D.a.error({message:"\u4fee\u6539\u5931\u8d25",description:"",duration:2})})).catch((function(){D.a.error({message:"Error",description:"Server Error",duration:2})}));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return r.a.createElement(b,null,r.a.createElement(n.Fragment,null,r.a.createElement(Z.a,{type:"primary",icon:r.a.createElement(Ee.a,null),onClick:function(){return e.dispatch(Y(!0))},style:{marginBottom:10}},"\u6dfb\u52a0\u76f4\u64ad\u6d41"),r.a.createElement(he.a,{visible:e.camdialog,footer:null,onCancel:function(){return e.dispatch(Y(!1))}},r.a.createElement(oe.a,{type:"flex",justify:"center",align:"middle"},r.a.createElement(ie.a,{xs:24,sm:12,md:12,lg:12,xl:12,xxl:12},r.a.createElement(b,null,r.a.createElement(Ze,null))))),r.a.createElement(fe.a,{dataSource:e.camera,rowKey:"id",scroll:{scrollToFirstRowOnChange:!0},pagination:{simple:!0,total:e.camera.length,pageSize:5}},r.a.createElement(fe.a.Column,{title:"\u76f4\u64ad\u6d41ID",dataIndex:"id"}),r.a.createElement(fe.a.Column,{title:"\u76f4\u64ad\u6d41\u540d\u79f0",dataIndex:"name"}),r.a.createElement(fe.a.Column,{title:"\u76f4\u64ad\u6d41\u5730\u5740",dataIndex:"url"}),r.a.createElement(fe.a.Column,{title:"\u64cd\u4f5c",dataIndex:"option",render:function(o,i){return e.camera.length>=1?r.a.createElement(n.Fragment,null,r.a.createElement(pe.a,{placement:"bottom",title:"\u542f\u7528\u76f4\u64ad\u6d41",arrowPointAtCenter:!0},r.a.createElement(Z.a,{type:"primary",icon:r.a.createElement(Xe.a,null),onClick:function(){return a(i)}})),r.a.createElement(de.a,{type:"vertical"}),r.a.createElement(me.a,{title:"\u786e\u8ba4\u5220\u9664",cancelText:"\u53d6\u6d88",okText:"\u786e\u5b9a",onConfirm:function(){return t(i)}},r.a.createElement(pe.a,{placement:"bottom",title:"\u5220\u9664\u76f4\u64ad\u6d41",arrowPointAtCenter:!0},r.a.createElement(Z.a,{type:"danger",icon:r.a.createElement(ge.a,null)})))):null}}))))}));var tt=Object(s.b)((function(e){return{token:e.userTodo.token,session_id:e.aiTodo.session_id}}))((function(e){Object(n.useEffect)((function(){(function(){var t=Object(w.a)(y.a.mark((function t(){return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null==e.token){t.next=4;break}if(""!=e.session_id){t.next=4;break}return t.next=4,z.a.get("/api/yituLogin",{},{headers:{authorization:"Bearer ".concat(e.token)}}).then((function(t){e.dispatch(Ye(t.data.cb))})).catch((function(){D.a.error({message:"Error",description:"Server Error",duration:2})}));case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()}),[]);var t=function(){var t=Object(w.a)(y.a.mark((function t(a){return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,z.a.post("/api/task",{name:a.name,requests:[{camera_id:a.camera_id,repository_id:a.repository_id,threshold:a.threshold}]},{headers:{authorization:"Bearer ".concat(e.token),session_id:e.session_id}}).then((function(e){2e4===e.data.code?(D.a.success({message:"\u6dfb\u52a0\u6210\u529f",description:"",duration:2}),setTimeout((function(){window.location.reload()}),2e3)):D.a.error({message:"\u6dfb\u52a0\u5931\u8d25",description:"",duration:2})})).catch((function(){D.a.error({message:"Error",description:"Server Error",duration:2})}));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return r.a.createElement(ce.a,{onFinish:t},r.a.createElement(ce.a.Item,{name:"name",rules:[{type:"string",required:!0,message:"\u8bf7\u8f93\u5165\u5e03\u63a7\u540d\u79f0"}]},r.a.createElement(se.a,{placeholder:"\u5e03\u63a7\u540d\u79f0",allowClear:!0})),r.a.createElement(ce.a.Item,{name:"camera_id",rules:[{type:"string",required:!0,message:"\u8bf7\u8f93\u5165\u76f4\u64ad\u6d41ID"}]},r.a.createElement(se.a,{placeholder:"\u76f4\u64ad\u6d41ID",allowClear:!0})),r.a.createElement(ce.a.Item,{name:"repository_id",rules:[{type:"string",required:!0,message:"\u8bf7\u8f93\u5165\u4eba\u50cf\u5e93ID"}]},r.a.createElement(se.a,{placeholder:"\u4eba\u50cf\u5e93ID",allowClear:!0})),r.a.createElement(ce.a.Item,{name:"threshold",rules:[{type:"string",required:!0,message:"\u8bf7\u8f93\u5165\u62a5\u8b66\u5206\u6570\u7ebf"}]},r.a.createElement(se.a,{placeholder:"\u62a5\u8b66\u5206\u6570\u7ebf",allowClear:!0})),r.a.createElement(ce.a.Item,null,r.a.createElement(Z.a,{type:"primary",block:!0,htmlType:"submit"},"\u6dfb \u52a0")))}));var at=Object(s.b)((function(e){return{token:e.userTodo.token,surveillance:e.aiTodo.surveillance,surdialog:e.uiTodo.surdialog,session_id:e.aiTodo.session_id}}))((function(e){Object(n.useEffect)((function(){(function(){var t=Object(w.a)(y.a.mark((function t(){return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null==e.token){t.next=7;break}if(""!=e.session_id){t.next=6;break}return t.next=4,z.a.get("/api/yituLogin",{},{headers:{authorization:"Bearer ".concat(e.token)}}).then((function(t){e.dispatch(Ye(t.data.cb)),e.dispatch($e({token:e.token,session_id:t.data.cb}))})).catch((function(){D.a.error({message:"Error",description:"Server Error",duration:2})}));case 4:t.next=7;break;case 6:e.dispatch($e({token:e.token,session_id:e.session_id}));case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()}),[]);var t=function(){var t=Object(w.a)(y.a.mark((function t(a){return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,z.a.post("/api/delTask",{id:a.id},{headers:{authorization:"Bearer "+e.token,session_id:e.session_id}}).then((function(e){2e4===e.data.code?(D.a.success({message:"\u5220\u9664\u6210\u529f",description:"",duration:2}),setTimeout((function(){window.location.reload()}),2e3)):D.a.error({message:"\u5220\u9664\u5931\u8d25",description:"",duration:2})})).catch((function(){D.a.error({message:"Error",description:"Server Error",duration:2})}));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return r.a.createElement(b,null,r.a.createElement(n.Fragment,null,r.a.createElement(Z.a,{type:"primary",icon:r.a.createElement(Ee.a,null),onClick:function(){return e.dispatch(J(!0))},style:{marginBottom:10}},"\u6dfb\u52a0\u5e03\u63a7"),r.a.createElement(he.a,{visible:e.surdialog,footer:null,onCancel:function(){return e.dispatch(J(!1))}},r.a.createElement(oe.a,{type:"flex",justify:"center",align:"middle"},r.a.createElement(ie.a,{xs:24,sm:12,md:12,lg:12,xl:12,xxl:12},r.a.createElement(b,null,r.a.createElement(tt,null))))),r.a.createElement(fe.a,{dataSource:e.surveillance,rowKey:"id",scroll:{scrollToFirstRowOnChange:!0},pagination:{simple:!0,total:e.surveillance.length,pageSize:5}},r.a.createElement(fe.a.Column,{title:"\u5e03\u63a7ID",dataIndex:"id"}),r.a.createElement(fe.a.Column,{title:"\u5e03\u63a7\u540d\u79f0",dataIndex:"name"}),r.a.createElement(fe.a.Column,{title:"\u64cd\u4f5c",dataIndex:"option",render:function(a,n){return e.surveillance.length>=1?r.a.createElement(me.a,{title:"\u786e\u8ba4\u5220\u9664",cancelText:"\u53d6\u6d88",okText:"\u786e\u5b9a",onConfirm:function(){return t(n)}},r.a.createElement(pe.a,{placement:"bottom",title:"\u5220\u9664\u5e03\u63a7",arrowPointAtCenter:!0},r.a.createElement(Z.a,{type:"danger",icon:r.a.createElement(ge.a,null)}))):null}}))))}));var nt=Object(s.b)((function(e){return{token:e.userTodo.token,surveillance:e.aiTodo.surveillance,realtime:e.aiTodo.realtime,alert:e.aiTodo.alert,session_id:e.aiTodo.session_id}}))((function(e){return Object(n.useEffect)((function(){(function(){var t=Object(w.a)(y.a.mark((function t(){return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null==e.token){t.next=12;break}if(""!=e.session_id){t.next=6;break}return t.next=4,z.a.get("/api/yituLogin",{},{headers:{authorization:"Bearer ".concat(e.token)}}).then(function(){var t=Object(w.a)(y.a.mark((function t(a){return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.dispatch(Ye(a.data.cb));case 2:return t.next=4,e.dispatch($e({token:e.token,session_id:a.data.cb}));case 4:return t.next=6,e.dispatch(He({token:e.token,session_id:a.data.cb}));case 6:return t.next=8,e.dispatch(Ve({token:e.token,session_id:a.data.cb}));case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(){notification.error({message:"Error",description:"Server Error",duration:2})}));case 4:t.next=12;break;case 6:return t.next=8,e.dispatch($e({token:e.token,session_id:e.session_id}));case 8:return t.next=10,e.dispatch(He({token:e.token,session_id:e.session_id}));case 10:return t.next=12,e.dispatch(Ve({token:e.token,session_id:e.session_id}));case 12:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()}),[]),r.a.createElement(b,null,r.a.createElement(we.a,{defaultActiveKey:"1"},r.a.createElement(we.a.TabPane,{tab:"\u6240\u6709\u62a5\u8b66",key:"1"},r.a.createElement(oe.a,{gutter:[10,10]},e.alert.map((function(e){return r.a.createElement(ie.a,{xs:24,sm:4,md:4,lg:4,xl:4,xxl:4,key:e.result1.face_image_id},r.a.createElement(De.a,{hoverable:!0,cover:r.a.createElement("img",{src:"http://222.73.36.73:11180/business/api/storage/image?uri_base64=".concat(window.btoa(e.result1.face_image_uri))})},r.a.createElement(pe.a,{placement:"top",title:e.result1.face_image_id,arrowPointAtCenter:!0},r.a.createElement(De.a.Meta,{title:e.result1.face_image_id}))))}))),r.a.createElement(Ae.a,{simple:!0,total:e.alert.length,pageSize:12,style:{textAlign:"center",margin:"15px auto 0"}})),r.a.createElement(we.a.TabPane,{tab:"\u5b9e\u65f6\u62a5\u8b66",key:"2"},r.a.createElement(oe.a,{gutter:[10,10]},e.realtime.map((function(e){return r.a.createElement(ie.a,{xs:24,sm:4,md:4,lg:4,xl:4,xxl:4,key:e.result1.face_image_id},r.a.createElement(De.a,{hoverable:!0,cover:r.a.createElement("img",{src:"http://222.73.36.73:11180/business/api/storage/image?uri_base64=".concat(window.btoa(e.result1.face_image_uri))})},r.a.createElement(pe.a,{placement:"top",title:e.result1.face_image_id,arrowPointAtCenter:!0},r.a.createElement(De.a.Meta,{title:e.result1.face_image_id}))))}))),r.a.createElement(Ae.a,{simple:!0,total:e.realtime.length,pageSize:12,style:{textAlign:"center",margin:"15px auto 0"}}))))})),rt=(a(566),a(294));var ot=function(){return r.a.createElement(rt.a,{status:"404",title:"404",subTitle:"\u9875\u9762\u4e0d\u5b58\u5728",extra:r.a.createElement(Z.a,{type:"primary",href:"/"},"\u8fd4\u56de\u9996\u9875")})},it=function(e){var t=e.component,a=Object(d.a)(e,["component"]);return r.a.createElement(m.b,Object.assign({},a,{render:function(e){return localStorage.getItem("token")?r.a.createElement(t,e):r.a.createElement(m.a,{to:{pathname:"/signIn",state:{from:e.location}}})}}))},ct=function(){return r.a.createElement(l.a,{locale:f.a},r.a.createElement(p.a,null,r.a.createElement(u.a,{style:{width:"100%",height:"100%",position:"absolute"}},r.a.createElement(u.a.Sider,{breakpoint:"lg",collapsedWidth:"0"},r.a.createElement(b,null,r.a.createElement(Q,null))),r.a.createElement(u.a,null,r.a.createElement(u.a.Header,{style:{background:"#fff",padding:0}},r.a.createElement(b,null,r.a.createElement(ae,null))),r.a.createElement(u.a.Content,{style:{margin:10,padding:10,background:"#fff",height:"100%"}},r.a.createElement(m.d,null,r.a.createElement(it,{exact:!0,path:"/",component:Le}),r.a.createElement(m.b,{exact:!0,path:"/signIn",component:le}),r.a.createElement(m.b,{exact:!0,path:"/password",component:ue}),r.a.createElement(it,{exact:!0,path:"/admin",component:Te}),r.a.createElement(it,{exact:!0,path:"/streams",component:Re}),r.a.createElement(it,{exact:!0,path:"/precloud",component:Fe}),r.a.createElement(it,{exact:!0,path:"/record",component:qe}),r.a.createElement(it,{exact:!0,path:"/setting",component:ye}),r.a.createElement(it,{exact:!0,path:"/view/:id",component:_e}),r.a.createElement(it,{exact:!0,path:"/cloud/:id",component:je}),r.a.createElement(it,{exact:!0,path:"/apk",component:Pe}),r.a.createElement(it,{exact:!0,path:"/files",component:Ne}),r.a.createElement(it,{exact:!0,path:"/repository",component:Qe}),r.a.createElement(it,{exact:!0,path:"/camera",component:et}),r.a.createElement(it,{exact:!0,path:"/surveillance",component:at}),r.a.createElement(it,{exact:!0,path:"/hit",component:nt}),r.a.createElement(m.b,{component:ot}))),r.a.createElement(re,null)))))},st=a(28),lt={token:localStorage.getItem("token"),user:{},codes:[],users:[],accounts:[],allCodes:[],unUseCodes:[],streams:[],fileList:[],homeDir:"",uploadFiles:[]};var ut={current:"home",dialog:!1,cModal:!1,upModal:!1,repdialog:!1,camdialog:!1,surdialog:!1};var dt={repository:[],camera:[],surveillance:[],realtime:[],alert:[],session_id:""};var mt=Object(i.c)({userTodo:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:lt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_USER":return Object(st.a)({},e,{user:t.user});case"ADD_CODES":return Object(st.a)({},e,{codes:t.codes});case"ADD_STREAMS":return Object(st.a)({},e,{streams:t.streams});case"ADD_USERS":return Object(st.a)({},e,{users:t.users});case"ADD_ACCOUNTS":return Object(st.a)({},e,{accounts:t.accounts});case"ADD_ALLCODES":return Object(st.a)({},e,{allCodes:t.allCodes});case"UNUSECODES":return Object(st.a)({},e,{unUseCodes:t.unUseCodes});case"ADD_FILELIST":return Object(st.a)({},e,{fileList:t.fileList});case"ADD_HOMEDIR":return Object(st.a)({},e,{homeDir:t.homeDir});case"ADD_UPLOADFILES":return Object(st.a)({},e,{uploadFiles:t.uploadFiles});default:return e}},uiTodo:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ut,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"NAVCURRENT":return Object(st.a)({},e,{current:t.current});case"SETTINGDIALOG":return Object(st.a)({},e,{dialog:t.dialog});case"CREATEMODAL":return Object(st.a)({},e,{cModal:t.cModal});case"UPDATEMODAL":return Object(st.a)({},e,{upModal:t.upModal});case"REPDIALOG":return Object(st.a)({},e,{repdialog:t.repdialog});case"CAMDIALOG":return Object(st.a)({},e,{camdialog:t.camdialog});case"SURDIALOG":return Object(st.a)({},e,{surdialog:t.surdialog});default:return e}},aiTodo:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:dt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"REPOSITORY":return Object(st.a)({},e,{repository:t.repository});case"CAMERA":return Object(st.a)({},e,{camera:t.camera});case"SURVEILLANCE":return Object(st.a)({},e,{surveillance:t.surveillance});case"REALTIME":return Object(st.a)({},e,{realtime:t.realtime});case"ALERT":return Object(st.a)({},e,{alert:t.alert});case"SESSION_ID":return Object(st.a)({},e,{session_id:t.session_id});default:return e}}}),pt=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function ft(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var ht=Object(i.d)(mt,Object(i.a)(c.a));Object(o.render)(r.a.createElement(s.a,{store:ht},r.a.createElement(ct,null)),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("","/service-worker.js");pt?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):ft(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):ft(t,e)}))}}()}},[[298,1,2]]]);
//# sourceMappingURL=main.56ee9c1d.chunk.js.map